<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<style>
    html {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
    }

    body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
    }

    .fx7hk {
        margin-top: 0px;
        height: 45px;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: space-around;
        border-top: 1px solid rgba(var(--b38, 219, 219, 219), 1);
        border-bottom: 1px solid rgba(var(--b38, 219, 219, 219), 1);
    }

    .topBar {
        display: flex;
        height: 50px;
        align-items: center;
        background-color: dodgerblue;
    }

    .topBar {
        width: 100%;
        height: 50px;
        background-color: dodgerblue;
        display: flex;
        align-items: center;
    }

    .search {
        line-height: 35px;
        width: calc(100% - 90px);
        height: 35px;
        min-height: 35px;
        border-radius: 10px;
        -webkit-appearance:none;
        outline: none;
        font-size: 16px;
        padding-right: 10px;
        border-style: none;
        padding-left: 10px;
        background-color: whitesmoke;
    }

    .scrollContent {
        overflow-y: scroll;
        height: calc(100% - 100px);
        width: 100%;
    }

    .headItem {
        margin-top: 15px;
        margin-left: 5px;
        display: flex;
        height: 50px;
        width: 100%;
        align-items: center;
    }

    .headItem img {
        width: 50px;
        height: 50px;
        border-radius: 25px;
        border-style: none;
        margin-left: 10px;
        margin-right: 10px;
    }

    .rightItem {
        display: flex;
        flex-direction: column;
        justify-content: center;
        height: 100%;
        width: calc(100% - 80px);
    }

    .rightItem h3 {
        font-size: 13px;
        font-weight: 600;
        height: 20px;
        margin: 0;
        color: #aaaaaa;
        -webkit-line-clamp: 1;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: pre;
        display: -webkit-box;
        word-break: break-all;
        -webkit-box-orient: vertical;
        max-width: calc(100% - 70px);
        margin-top: 5px;
    }

    .rightItem h2 {
        font-size: 13px;
        font-weight: 600;
        margin: 0;
    }

    .time {
        font-size: 13px;
        font-weight: 600;
        margin: 0;
        color: #aaaaaa;
    }

    .item {
        display: inline-flex;
        flex-direction: column;
        width: 100%;
        margin-top: 10px;
        background-color: white;
        justify-content: center;
        align-items: center;
    }

    .itemBlock {
        display: flex;
        width: calc(100% - 20px);
        align-items: center;
        margin-top: 10px;
        margin-bottom: 10px;
    }

    .itemBlock img {
        width: 60px;
        height: 60px;
        border-radius: 5px;
    }

    .itemBlock .leftBlock {
        display: flex;
        flex-direction: column;
        margin-left: 10px;
        max-width: calc(100% - 100px);
    }

    .leftBlock .h1 {
        color: black;
        font-size: 18px;
        margin-top: 5px;
        margin-bottom: 0;
        -webkit-line-clamp: 2;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        white-space: normal;
        overflow-y: hidden;
    }

    .leftBlock .h2 {
        color: red;
        font-size: 14px;
        margin-top: 5px;
        margin-bottom: 0;
    }

    .leftBlock .h3 {
        color: hsla(0, 0%, 6.7%, .6);
        font-size: 14px;
        margin-top: 5px;
        margin-bottom: 0;
    }

    .btFlex {
        display: flex;
        margin-bottom: 10px;
        align-items: center;
        width: 90%;
        height: 20px;
    }

    .btFlex img {
        width: 20px;
        height: 20px;
    }

    .btFlex h3 {
        font-size: 13px;
        color: gray;
        margin-left: 10px;
    }
    .wrapper {
        display: grid;
        grid-template-columns: repeat(2, calc(50vw - 10px));
        grid-auto-rows: calc(50vw + 10px);
        grid-gap: 10px;
        width: calc(100% - 10px);
        margin-left: 10px;
        overflow: hidden;
        margin-top: 10px;
        padding-bottom: 10px;
    }

    .wrapper .item .itemImg {
        position: relative;
        width: calc(100vw / 2 - 30px);
        height: calc(100vw / 2 - 30px);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        background-color: black;
        background-repeat: no-repeat;
    }

    .wrapper .item .itemTitle {
        font-size: 14px;
        margin-top: 5px;
        margin-bottom: 5px;
        color: black;
        width: 100%;
        height: 20px;
        overflow: hidden;
    }

    .headFlex {
        top: 0;
        height: 40px;
        position: absolute;
        width: 100%;
        display: flex;
        align-items: center;
        padding-left: 10px;
    }

    .headImg {
        width: 25px;
        height: 25px;
        border-radius: 12px;
    }

    .pick {
        color: white;
        font-size: 14px;
        margin-left: 10px;
        font-weight: 600;
    }
</style>
<link rel="stylesheet" href="../css/Frag_News.css">
<link rel="stylesheet" href="../css/CVideo_Cell.css">
<script src="../model/Md_CVideo.js"></script>
<script src="../glitterBundle/ControlInstance.js"></script>
<body>

</body>
</html>
<script>
    //ViewModel
    var searchUserModel = {
        data: [],
        onLoadIng: false,
        isBt: false,
        searchData:'',
        request: function () {
            if (this.onLoadIng) {
                return
            }
            this.onLoadIng = true
            var id = "-1"
            if (this.data.length > 0) {
                id = this.data[this.data.length - 1]
            }
            glitter.publicBeans.postRequest({request: 'searchUser', id: id,searchData:searchUserModel.searchData}, function (result) {
                var json = JSON.parse(result)
                searchUserModel.data = (json["data"])
                searchUserModel.onLoadIng = false
            }, function error(data) {
                searchUserModel.onLoadIng = false
                searchUserModel.request()
            })
        }
    }
    //VideoModel
    var userVideoModel = {
        data: [],
        circle:'All',
        searchData:'',
        onLoadIng: false,
        prePend:false,
        isBt:false,
        request: function () {
            if (this.onLoadIng) {
                return
            }
            this.onLoadIng = true
            var id = "-1"
            if (this.data.length > 0) {
                id = this.data[this.data.length - 1]
            }
            glitter.publicBeans.postRequest({request: 'getCVideo', id: id,searchData:userVideoModel.searchData,circle:this.circle}, function (result) {
                var json = JSON.parse(result)
                userVideoModel.data = JSON.parse(json["data"])
                userVideoModel.onLoadIng = false
            }, function error(data) {
                userVideoModel.onLoadIng = false
                userVideoModel.request()
            })
        }
    }
    //ArticleModel
    var articleModel = {
        data: [],
        onLoadIng: false,
        searchData:'',
        prePend:false,
        isBt:false,
        circle:'All',
        request: function () {
            if (this.onLoadIng) {
                return
            }
            this.onLoadIng = true
            var id = "-1"
            if (this.data.length > 0) {
                id = this.data[this.data.length - 1]
            }
            glitter.publicBeans.postRequest({request: 'getForium', id: id,circle:articleModel.circle,searchData:articleModel.searchData}, function (result) {
                articleModel.onLoadIng = false
                let json = JSON.parse(result)
                let originSize=articleModel.data.length
                let item=JSON.parse(json["data"])
                articleModel.data = articleModel.data.concat(item)
                articleModel.isBt=(articleModel.data.length===originSize)
            }, function error(data) {
                articleModel.onLoadIng = false
                articleModel.request()
            })
        }
    }
    //GroupModel
    var groupModel = {
        data: [],
        searchData:'',
        onLoadIng: false,
        prePend:false,
        circle:"All",
        isBt:false,
        request: function () {
            if (this.onLoadIng) {
                return
            }
            this.onLoadIng = true
            var id = "-1"
            if (this.data.length > 0) {
                id = this.data[this.data.length - 1]
            }
            glitter.publicBeans.postRequest({request: 'getGroupData', id: id,searchData:groupModel.searchData,type:'All',circle:this.circle}, function (result) {
                var json = JSON.parse(result)
                var originSize=groupModel.data.length
                if (json["data"] !== undefined) {
                    let item=JSON.parse(json["data"])
                    groupModel.data = groupModel.data.concat(item)
                }
                groupModel.isBt=(groupModel.data.length===originSize)
                groupModel.onLoadIng = false
            }, function error(data) {
                groupModel.onLoadIng = false
                groupModel.request(id, prefix)
            })
        }
    }
    //ShoppingModel
    var shoppingModel={
        data: [],
        onLoadIng: false,
        prePend:false,
        searchData:'',
        isBt:false,
        circle:'All',
        request: function () {
            if (this.onLoadIng) {
                return
            }
            this.onLoadIng = true
            var id = "-1"
            if (this.data.length > 0) {
                id = this.data[this.data.length - 1]
            }
            glitter.publicBeans.postRequest({request: 'getCommodity', id: id,searchData:shoppingModel.searchData,circle:shoppingModel.circle}, function (result) {
                shoppingModel.onLoadIng = false
                var json = JSON.parse(result)
                var originSize=shoppingModel.data.length
                var item=JSON.parse(json["data"])
                item.map(function (it){it.itemType='commodity'})
                if (json["data"] !== undefined) {
                    shoppingModel.data = shoppingModel.data.concat(item)
                }
                shoppingModel.isBt=(shoppingModel.data.length===originSize)
            }, function error(data) {
                shoppingModel.onLoadIng = false
                shoppingModel.request(id, prefix)
            })
        },
        requestOld: function () {
            if(this.isBt){return}
            this.prePend=false
            var id = (this.data.length === 0) ? "-1" : this.data[this.data.length - 1].id
            this.request(id, false)
        },
        requestNew: function () {
            this.isBt=false
            this.prePend=true
            var id = (this.data.length === 0) ? "-1" : this.data[0].id
            this.request(id, true)
        }
    }
    //按鈕點選
    var clickPosition = {position: gBundle}
    lifeCycle.onCreate = function () {
        glitter.addObserver(clickPosition, "position", function (result) {
            $('#fun4').css('fill', "#bebcb9")
            $('#fun3').css('fill', "#bebcb9")
            $('#fun2').css('fill', "#bebcb9")
            $('#fun1').css('fill', "#bebcb9")
            $('#fun0').css('fill', "#bebcb9")
            $('#scrollContent').html(glitter.publicBeans.getLoadingView)
            switch (result) {
                case 0:
                    searchUserModel.data=[]
                    searchUserModel.searchData=$('#search').val()
                    searchUserModel.onLoadIng=false
                    searchUserModel.request()
                    $('#fun0').css('fill', "dodgerblue")
                    break;
                case 1:
                    userVideoModel.data=[]
                    userVideoModel.searchData=$('#search').val()
                    userVideoModel.onLoadIng=false
                    userVideoModel.request()
                    $('#fun1').css('fill', "dodgerblue")
                    break;
                case 2:
                    articleModel.data=[]
                    articleModel.searchData=$('#search').val()
                    articleModel.onLoadIng=false
                    articleModel.request()
                    $('#fun2').css('fill', "dodgerblue")
                    break;
                case 3:
                    groupModel.data=[]
                    groupModel.searchData=$('#search').val()
                    groupModel.onLoadIng=false
                    groupModel.request()
                    $('#fun3').css('fill', "dodgerblue")
                    break;
                case 4:
                    shoppingModel.data=[]
                    shoppingModel.searchData=$('#search').val()
                    shoppingModel.onLoadIng=false
                    shoppingModel.request()
                    $('#fun4').css('fill', "dodgerblue")
                    $('#scrollContent').html(`<div id="itemList" class="wrapper">
</div>`)
                    break;
            }
        })
        glitter.addObserver(searchUserModel, "data", function (result) {
            if(clickPosition.position!==0){return}
            if (result.length !== 0) {
                $('#scrollContent').html(``)
            }
            for (let a = 0; a < result.length; a++) {
                let data = result[a]
                if (glitter.unicodeToString(data.pick).toLowerCase().indexOf($("#search").val().toLowerCase()) !== -1) {
                    $('#scrollContent').append(` <div  id="item${a}" class="headItem">
  <img src="${data.head}">
<div class="rightItem">
<h2>${glitter.unicodeToString(data.pick)}</h2>
</div>
<div style="flex: auto;"></div>
</div>`)
                    $(`#item${a}`).click(function () {
                        glitter.publicBeans.goUserInfo(searchUserModel.data[a].account)
                    })
                }
            }
        })
        glitter.addObserver(searchUserModel,"onLoadIng",function (result){
            if(clickPosition.position!==0){return}
            $('#loadingView').remove()
            if(result){
                $('#scrollContent').html(``)
                $('#scrollContent').append(glitter.publicBeans.getLoadingView)
            }else{
                if(searchUserModel.data.length===0){
                    $('#scrollContent').html(`<img src="../img/emptyFile.gif" style="width: 100%;margin: 0;min-height: 50px;">
<h3 style="color: grey;margin-top: -100px;width: 100%;display: flex;align-items: center;justify-content: center;font-size: 14px;">尚無內容...</h3>`)
                }
            }
        })
        glitter.addObserver(userVideoModel, "data", function (result) {
            if(clickPosition.position!==1){return}
            if (result.length !== 0) {
                $('#scrollContent').html(``)
            }
            for (let a = 0; a < result.length; a++) {
                let data = result[a]
                let html= `
                    ${publicBeans.getVideoView(data, 'pointer-events:none;width:  100%; height:57vw;background-color: black;margin: 0;border-radius: 0;',false)}
<div style="background-color: white;display: flex;align-items: center;height: 62px;margin: 0;">
<img src="${data.head}" style="width: 30px;height: 30px;margin-left: 10px;border-radius: 15px;">
<div style="white-space:nowrap;max-width:calc(100% - 90px);display: flex;flex-direction: column;margin-left: 10px;justify-content: center;">
<h3 style="overflow:hidden;text-overflow:ellipsis;font-weight: 500;font-size: 16px;margin: 0;display: -webkit-box;-webkit-line-clamp: 2;-webkit-box-orient: vertical;white-space: normal;">
${glitter.unicodeToString(data.title)}</h3>
<div style="display: flex;margin: 0;align-items: center;">
<h3 style="opacity: .6;font-size: 11px;margin: 0;">${glitter.unicodeToString(data.pick)}</h3>
<span style="opacity: .6;font-size: 10px;margin-left: 5px;margin-right: 5px;"> • </span>
<span style="opacity: .6;font-size: 10px;">${data.reader}次觀看</span>
<span style="opacity: .6;font-size: 10px;margin-left: 5px;margin-right: 5px;"> • </span>
<span style="opacity: .6;font-size: 10px;">${data.time}</span>
</div>
</div>
<div style="flex: auto;"></div>
<div id="more${data.id}" style="width: 20px;height: 20px;margin-right: 10px;">
<svg viewBox="0 0 24 24" fill=""><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg>
</div>
</div>
`
                if(document.getElementById(data.id)){
                    $('#'+data.id).html(html)
                }else{
                    players = players.concat(data.id)
                    $('#scrollContent').append(`<div class="videoItem" id="${data.id}" style="margin-bottom: 10px;">${html}</div>`)
                    var videoPlayer = $('#' + data.id + ' video').get(0);
                    videoPlayer.autoplay = false
                    videoPlayer.controls = false
                    $('#'+data.id).click(function (){
                        glitter.publicBeans.goVideo(data.id)
                    })
                }
                $('#more'+data.id).click(function (){
                    glitter.openDiaLog('dialog/Dia_Video_Info.html','Dia_Video_Info',false,true,data)
                    return false
                })
            }
        })
        glitter.addObserver(userVideoModel,"onLoadIng",function (result){
            if(clickPosition.position!==1){return}
            $('#loadingView').remove()
            if(result){
                $('#scrollContent').html(``)
                $('#scrollContent').append(glitter.publicBeans.getLoadingView)
            }else{
                if(userVideoModel.data.length===0){
                    $('#scrollContent').html(`<img src="../img/emptyFile.gif" style="width: 100%;margin: 0;min-height: 50px;">
<h3 style="color: grey;margin-top: -100px;width: 100%;display: flex;align-items: center;justify-content: center;font-size: 14px;">尚無內容...</h3>`)
                }
            }
        })
        glitter.addObserver(articleModel,"onLoadIng",function (result){
            if(clickPosition.position!==2){return}
            $('#loadingView').remove()
            if(result){
                $('#scrollContent').html(``)
                $('#scrollContent').append(glitter.publicBeans.getLoadingView)
            }else{
                if(articleModel.data.length===0){
                    $('#scrollContent').html(`<img src="../img/emptyFile.gif" style="width: 100%;margin: 0;min-height: 50px;">
<h3 style="color: grey;margin-top: -100px;width: 100%;display: flex;align-items: center;justify-content: center;font-size: 14px;">尚無內容...</h3>`)
                }
            }
        })
        glitter.addObserver(articleModel,"data",function (result){
            if(clickPosition.position!==2){return}
            if (result.length !== 0) {
                $('#scrollContent').html(``)
            }
            var json=result
            for (let i = 0; i < json.length; i++) {
                let data = (articleModel.prePend) ? json[json.length-i-1]:json[i]
                var html=''
                if (data.image === undefined||data.image==='NA'||data.image==='') {
                    html =
                        `
            <div class="itembar">
                <img src="${data.head}" class="headImg">
                <t1 class="name">${glitter.unicodeToString(data.pick)}</t1>
                <img src="../img/spi.png" style="width: 15px;height: 15px;margin-top: 5px;">
                <t1 class="circle">${data.circle}</t1>
            </div>
            <div style="width: 100%;display: flex;margin-top: -10px;">
                <div style="width: calc(100% - 10px);">
                    <h1 class="title" >${glitter.unicodeToString(data.title)}</h1>
                    <h1 class="content" style="width: calc(100% - 20px);height: 20px; text-overflow: ellipsis;"  >${glitter.unicodeToString(data.content)}</h1>
                </div>
            </div>
            <div style="bottom: 0;width: 100%;height: 1px;background-color: gray;position: relative;"></div>
`
                } else {
                    html = `
            <div class="itembar">
                <img src="${data.head}" class="headImg">
                <t1 class="name">${glitter.unicodeToString(data.pick)}</t1>
                <img src="../img/spi.png" style="width: 15px;height: 15px;margin-top: 5px;">
                <t1 class="circle">${data.circle}</t1>
            </div>
            <div style="width: 100%;display: flex;margin-top: -10px;">
                <div style="width: calc(100% - 80px);white-space: nowrap; ">
                    <h1 class="title" >${glitter.unicodeToString(data.title)}</h1>
                    <h1 class="content" style="width: calc(100% - 20px);height: 20px; text-overflow: ellipsis;" >${glitter.removeTag(glitter.unicodeToString(data.content))}</h1>
                </div>
                <img src="${data.image}" class="hint">
            </div>
            <div style="width: 100%;height: 1px;background-color: gray;position: relative;"></div>
`
                }
                if(document.getElementById(data.id)){
                    $('#'+data.id).html(html)
                }else{
                    $('#scrollContent').append(`     <div class="ListItem" id="${data.id}">${html}</div>`)
                    $( "#"+data.id ).click(function() {
                        glitter.publicBeans.goArticle(data.id)
                    });
                }
            }
        })
        glitter.addObserver(groupModel,"onLoadIng",function (result){
            if(clickPosition.position!==3){return}
            $('#loadingView').remove()
            if(result){
                $('#scrollContent').html(``)
                $('#scrollContent').append(glitter.publicBeans.getLoadingView)
            }else{
                if(groupModel.data.length===0){
                    $('#scrollContent').html(`<img src="../img/emptyFile.gif" style="width: 100%;margin: 0;min-height: 50px;">
<h3 style="color: grey;margin-top: -100px;width: 100%;display: flex;align-items: center;justify-content: center;font-size: 14px;">尚無內容...</h3>`)
                }
            }
        })
        glitter.addObserver(groupModel,"data",function (result){
            if(clickPosition.position!==3){return}
            if (result.length !== 0) {
                $('#scrollContent').html(``)
            }
            var json=result
            for (let i = 0; i < json.length; i++) {
                try {
                    let data = json[i]
                    let html=getItemView(data)
                    if(document.getElementById("item"+data.id)){
                        $('#item'+data.id).html(html)
                    }else{
                        $('#scrollContent').append(`  <div id="item${data.id}" class="item" style="width: calc(100% -20px);"
                         onClick="glitter.publicBeans.goActivity('${data.id}')">${html}</div>`)
                        glitter.addObserver(data,"isSub", function (result) {
                            $(`#item${data.id}`).html(getItemView(data))
                            $(`#sub${data.id}`).click(function (e) {
                                glitter.publicBeans.postWithDialog({
                                    request: 'postGroupSub',
                                    account: glitter.md_user.account,
                                    id: data.id
                                }, function () {
                                    var aitem=groupModel.data.filter(function (it){return it.id===position})[0]
                                    aitem.isSub = (aitem.isSub === 'true') ? 'false' : 'true'
                                    groupModel.data=groupModel.data
                                }, function () {
                                })
                                return false
                            })
                        })
                    }
                    $(`#sub${data.id}`).click(function (e) {
                        glitter.publicBeans.postWithDialog({
                            request: 'postGroupSub',
                            account: glitter.md_user.account,
                            id: data.id
                        }, function () {
                            var aitem=groupModel.data.filter(function (it){return it.id===data.id})[0]
                            aitem.isSub = (aitem.isSub === 'true') ? 'false' : 'true'
                            groupModel.data=groupModel.data
                        }, function () {
                        })
                        return false
                    })

                }catch (e){
                    alert(e)
                }
            }
        })
        glitter.addObserver(shoppingModel, "data", function (result) {
            if(result.length>0){
                $('#empty').remove()
            }
            for (let a = 0; a < result.length; a++) {
                let data = result[a]
                let image = JSON.parse(data.image)[0]
                let html = `<div class="item">
  <div class="itemImg"><img id="image${data.id}" style="width: 100%;" src="${image}">
  <div class="headFlex">
  <img class="headImg" src="${data.head}">
  <h3 class="pick">${glitter.unicodeToString(data.pick)}</h3>
</div>
${glitter.publicBeans.getLoadingViewId(data.id)}
  </div>
  <div class="itemTitle">${glitter.unicodeToString(data.title)}</div>
  </div>`
                if (!document.getElementById(`item${data.id}`)) {
                    $('#itemList').append(` <div id="item${data.id}">${html}</div>`)
                    $(`#image${data.id}`).hide()
                    let timer = setInterval(function () {
                        let image = document.getElementById(`image${data.id}`)
                        if (image.complete) {
                            console.log("Width", image.naturalWidth);
                            console.log("Height", image.naturalHeight);
                            if (image.naturalWidth >= image.naturalHeight) {
                                $(`#image${data.id}`).css('height', '100%')
                                $(`#image${data.id}`).css('width', 'auto')
                            } else {
                                $(`#image${data.id}`).css('height', 'auto')
                                $(`#image${data.id}`).css('width', '100%')
                            }
                            $(`#image${data.id}`).show()
                            $(`#loadingView${data.id}`).hide()
                            clearInterval(timer);
                        }
                    }, 10);
                    $(`#item${data.id}`).click(function () {
                        glitter.publicBeans.goCommodity(data.id)
                        return false
                    })
                }

            }
        })
        glitter.addObserver(shoppingModel,"onLoadIng",function (result){
            if(!result){
                $('#loadingView').remove()
                if(((shoppingModel.data.length===0))){
                    $('#itemList').html(`<div id="empty" style="position: absolute;width: 100%;">
<img src="../img/emptyFile.gif" style="width: 100%;margin: 0;min-height: 50px;">
<h3 style="color: grey;margin-top: -100px;width: 100%;display: flex;align-items: center;justify-content: center;font-size: 14px;">尚無內容...</h3>
</div>`)
                }
            }else {
                if(((shoppingModel.data.length===0))){
                    $('#itemList').html(``)
                }
                $('#itemList').append(glitter.publicBeans.getLoadingView)
            }
        })
    }
    lifeCycle.onCreateView = function () {
        return `
        <div class="topBar">
    <img src="../img/btn_back_normal.png" style="height: 50px;width: 50px;margin: 0" onclick="glitter.goBack()">
  <input  class="search" type="search"  onsearch="searchAction()" id="search" placeholder="搜尋">
<div>
<svg version="1.1" id="id_svgCanvas" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" style="enable-background:new 0 0 32 32;fill: #ffffff;margin-right: 5px;" xml:space="preserve" preserveAspectRatio="none">
<path d="M23.596,22.182C25.098,20.365,26,18.036,26,15.496C26,9.699,21.301,5,15.503,5C9.707,5,5.007,9.699,5.007,15.496
\ts4.699,10.497,10.496,10.497c2.537,0,4.863-0.9,6.678-2.397l5.481,5.481l1.414-1.414L23.596,22.182z M15.503,24.997
\tc-5.247,0-9.5-4.254-9.5-9.501s4.253-9.5,9.5-9.5c5.248,0,9.5,4.253,9.5,9.5S20.751,24.997,15.503,24.997z M24,15.5
\tc0,4.694-3.806,8.5-8.5,8.5S7,20.194,7,15.5S10.806,7,15.5,7S24,10.806,24,15.5z"></path>
</svg>
</div>
</div>
<div class="fx7hk">
<div onclick="clickPosition.position=0">
<svg id="fun0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"  x="0px" y="0px" width="20px" height="20px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve" preserveAspectRatio="none" style="fill: rgb(117, 162, 216);">
<g id="55152633_Shape_5_xA0_Clipping_Path_1_">
\t<g>
\t\t<path d="M20,25c5.929,0,9-8.295,9-12S28.893,2,20,2c-8.893,0-9,7.295-9,11S14.071,25,20,25z M34.821,28.893    c-2.224-1.481-8.893-4.446-8.893-4.446S23.784,27,20,27s-5.929-2.554-5.929-2.554s-6.669,2.965-8.893,4.446    C2.956,30.375,2,38,2,38h36C38,38,37.438,30.637,34.821,28.893z" ></path>
\t</g>
</g>
</svg>
</div>
<div onclick="clickPosition.position=1">
<svg  id="fun1"  x="0px" y="0px" width="25px" height="25px" viewBox="0 0 32 32" style="fill: rgb(199, 68, 28);" xml:space="preserve">
<g>
<path d="M23.5,6c-6,0-7.5,0-7.5,0s-1.5,0-7.5,0s-6,3.5-6,3.5v13c0,0,0,3.5,6,3.5s7.5,0,7.5,0s1.5,0,7.5,0s6-3.5,6-3.5v-13   C29.5,9.5,29.5,6,23.5,6z M13,20v-8l7.5,4L13,20z" ></path>
</g>
</svg>
</div>
<div onclick="clickPosition.position=2">
<svg  id="fun2" width="25px" height="25px" viewBox="0 0 64 64" style="enable-background:new 0 0 64 64;fill: rgb(199, 68, 28);" xml:space="preserve"><g>
<g>
<defs>
<path id="573230084_SVGID_1__rel" d="M56,14H8c-1.657,0-3,1.343-3,3v27c0,1.657,1.343,3,3,3h8v11l11-11h29c1.657,0,3-1.343,3-3V17     C59,15.343,57.657,14,56,14z"></path>
</defs>
<clipPath id="573230084_SVGID_2__rel">
<use xlink:href="#573230084_SVGID_1__rel" style="overflow:visible;"></use>
</clipPath>
<g class="st4" style="clip-path:url(#573230084_SVGID_2__rel);;">
<rect x="5" y="14" class="stshockcolor" width="54" height="44" ></rect>
<polygon class="st2" points="24.632,58 5,58 5,14 50.035,14    " style="opacity:0.3;fill:#FFFFFF;;"></polygon>
<path class="st6" d="M18.5,36c-0.384,0-0.768-0.146-1.061-0.439c-0.586-0.586-0.586-1.535,0-2.121     C19.185,31.694,25.14,26,28.5,26c2.631,0,3.389,2.652,3.942,4.588C32.666,31.371,33.131,33,33.5,33h4c0.828,0,1.5,0.672,1.5,1.5     S38.328,36,37.5,36h-4c-2.631,0-3.389-2.652-3.942-4.588C29.334,30.629,28.869,29,28.5,29c-1.423,0-5.771,3.392-8.939,6.561     C19.268,35.854,18.884,36,18.5,36z" style="fill:#231F20;fill-opacity:0.3;;"></path>
</g>
</g>
<g>
<defs>
<path id="573230084_SVGID_3__rel" d="M45.628,31.596c0,0,11.717-20.293,12.428-21.526c0.712-1.231,1.057-4.319-2.179-6.188     c-3.236-1.868-5.738-0.025-6.449,1.207C48.717,6.321,37,26.615,37,26.615c0,2.186,0,7.207,0,8.284     c0,1.076,0.521,1.377,1.453,0.84C39.387,35.198,43.736,32.689,45.628,31.596z"></path>
</defs>
<use xlink:href="#573230084_SVGID_3__rel" class="st10" style="fill:#E9BF54;;overflow:visible;"></use>
<clipPath id="573230084_SVGID_4__rel">
<use xlink:href="#573230084_SVGID_3__rel" style="overflow:visible;"></use>
</clipPath>
<g class="st5" style="clip-path:url(#573230084_SVGID_4__rel);;">
<rect x="34.346" y="28.579" transform="matrix(0.866 0.5 -0.5 0.866 21.5294 -15.3167)" class="st3" width="10" height="7.874" style="fill:#FFFFFF;fill-opacity:0.5;;"></rect>
<rect x="35.127" y="33.127" transform="matrix(0.866 0.5 -0.5 0.866 22.4205 -14.4245)" class="st7" width="6" height="2.998" style="fill:#231F20;fill-opacity:0.6;;"></rect>
<rect x="44.627" y="8.743" transform="matrix(0.866 0.5 -0.5 0.866 12.5384 -24.3075)" class="st9" width="14" height="5" style="fill:#DEDCD9;;"></rect>
<rect x="47.376" y="3.48" transform="matrix(0.866 0.5 -0.5 0.866 10.5264 -26.3219)" class="st8" width="14" height="6" style="fill:#DD7047;;"></rect>

<rect x="46.292" y="2.653" transform="matrix(0.8661 0.4999 -0.4999 0.8661 17.1097 -21.5593)" class="st1" width="5.001" height="37" style="opacity:0.15;;"></rect>
</g>
</g>
</g>
</svg>
</div>
<div onclick="clickPosition.position=3">
<svg id="fun3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"  x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" style="margin-top:5px;top:5px;fill: rgb(170,170,170);" xml:space="preserve" preserveAspectRatio="none">
    <path d="M19.99,4H18v2h-2V4H8v2H6V4H3.99C2.88,4,2,4.9,2,6v12c0,1.1,0.89,2,2,2h16c1.1,0,2-0.9,2-2V6C22,4.9,21.09,4,19.99,4z   M20,18H4V8h16V18z M6,2v2h2V2H6z M16,2v2h2V2H16z M18,16h-6v-6h6V16z" style="margin-top:5px;"></path>
    </svg>
</div>
<div onclick="clickPosition.position=4">
<svg id="fun4" version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24"  xml:space="preserve" style="fill: rgb(199, 68, 28);" preserveAspectRatio="none">
<path d="M18,11c-1.039,0-1.896-0.797-1.991-1.811l-0.014-0.042C15.92,10.181,15.054,11,14,11c-1.039,0-1.896-0.797-1.991-1.811
\tL12,9.162l-0.009,0.027C11.896,10.203,11.039,11,10,11c-1.054,0-1.919-0.819-1.995-1.854L7.991,9.189C7.896,10.203,7.039,11,6,11
\tc-1.054,0-1.919-0.819-1.995-1.854L4,9.163V20h10v-6h4v6h2V9.162l-0.005-0.015C19.92,10.181,19.054,11,18,11z M12,17H6v-3h6V17z
\t M13,9l-1-3h2l0.923,2.615l-0.001,0C14.972,8.734,15,8.863,15,9c0,0.552-0.448,1-1,1S13,9.552,13,9z M9,9
\tc0-0.137,0.028-0.266,0.078-0.385l-0.001,0L10,6h2l-1,3c0,0.552-0.448,1-1,1S9,9.552,9,9z M17,9l-1-3h2l0.923,2.615l-0.001,0
\tC18.972,8.734,19,8.863,19,9c0,0.552-0.448,1-1,1S17,9.552,17,9z M23,9c0,0.552-0.448,1-1,1s-1-0.448-1-1l-1-3h2l0.923,2.615
\tl-0.001,0C22.972,8.734,23,8.863,23,9z M5,9c0-0.137,0.028-0.266,0.078-0.385l-0.001,0L6,6h2L7,9c0,0.552-0.448,1-1,1S5,9.552,5,9z
\t M4,6L3,9c0,0.552-0.448,1-1,1S1,9.552,1,9c0-0.137,0.028-0.266,0.078-0.385l-0.001,0L2,6H4z" ></path>
</svg>
</div>
</div>
<div id="scrollContent" class="scrollContent">
${glitter.publicBeans.getLoadingView}
</div>
        `
    }

    function searchUser() {

    }

    function searchAction(){
        var searchval=$("#search").val()
        userVideoModel.searchData=searchval
        searchUserModel.searchData=searchval
        articleModel.searchData=searchval
        groupModel.searchData=searchval
        clickPosition.position=clickPosition.position
    }
    //GetGroupItemView
    function getItemView(data){
        return `<div class="itemBlock">
        ${(data.promoteImage !== '') ? '<img src="' + data.promoteImage + '" >' : ''}
        <div class="leftBlock" >
        <h3 class="h2">${data.startTime.substring(0, 16)}</h3>
        <h3 class="h1">${glitter.unicodeToString(data.title)}</h3>
        <h3 class="h3">活動．${data.joinCount}人已參加</h3>
</div>
<div style="flex: auto;"></div>
<div class="sub" id="sub${data.id}" style="width: 25px;height: 25px;fill:${(data.isSub === 'true') ? 'dodgerblue' : 'gray'};">
  <svg viewBox="0 0 24 24" focusable="false" role="img" aria-hidden="true" class="ite" id="subBt">
            <path d="M17.65 21.39L12 17.5l-5.65 3.88A1.5 1.5 0 014 20.15V5a2.5 2.5 0 012.5-2.5h11A2.5 2.5 0 0120 5v15.15a1.5 1.5 0 01-2.35 1.24z"></path>
        </svg>
</div>
</div>
<div class="btFlex" >
<img src="../img/location.png">
<h3 >${glitter.unicodeToString(data.address)}</h3>
</div>`
    }
</script>