<!DOCTYPE html>
<base target="_parent">
<meta name="viewport" content="width=device-width">
<html lang="en">
<head>
    <meta charset="UTF-8">
</head>
<script src="../model/Md_User.js"></script>

<script src="../glitterBundle/ControlInstance.js"></script>
<style>
    html{
        width: 100%;
        height: 100%;
    }
    body{
        background-image: url("../img/background.png");
        background-position: 100% 100%;
        background-size: 100% 100%;
        background-repeat: no-repeat;
        margin: 0;
        padding: 0;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    h3{
        margin-top: 5px;
        font-size: 14px;
    }
    .center{

    }
    span{
        font-size: 14px;
    }
</style>
<body>
<div style="width: 100%;display: inline-block;position: relative;">
    <h3 style="font-weight:400;letter-spacing: 3px;text-align: center;color: white;margin-left: 10px;font-size: 50px;">𝒫𝑒𝓉𝒶𝑔𝓇𝒶𝓂</h3>
    <div style="margin-left: 40px;margin-right: 40px;margin-top: -40px;padding: 0;z-index: 1">
        <h3 style="color: white;">login with</h3>
        <div onclick="FB.login(function(response) {
           FB.api('/me', function(response) {
               if(response.id !== undefined){ loginWithFacebook(response.id,response.name)}
        });
}, {scope: 'public_profile,email'});" style="width: 100%;height: 45px;background-color: #0e65d8;border-radius: 10px;display: flex;align-items: center;justify-content: center;">
<h3 style="color: white;font-size: 14px;font-weight: 600;">使用臉書進行登入</h3>
        </div>
        <h3 style="color: white;">or</h3>
        <h3 style="color: white;">帳號</h3>
        <input id='admin' placeholder="請輸入您的帳號" style="padding-left:10px;width: calc(100% - 10px);position:relative;margin-right:10px;height: 45px;stroke-width: 1px;border-radius: 5px;border-width:1px;border-color: white;">
        <h3 style="color: white;margin-top:10px;">密碼</h3>
        <input id='password' type="password" placeholder="請輸入您的密碼" style="padding-left:10px;width: calc(100% - 10px);position:relative;height: 45px;stroke-width: 1px;border-radius: 5px;border-width:1px;border-color: white;">
        <div style="width: 100%;height: 45px;background-color: #323643;text-align: center;margin-top:20px;border-radius: 10px;" onclick="signIn()">
            <h3 style="transform:translate(-50%,-50%);top:50%;left:50%;color: white;position: relative;text-align: center;">登入</h3>
        </div>
        <div style="display:inline-block;width: 100%;height: 60px;margin-top: 10px;top: 10px;">
            <span style="color: white;margin-top: 10px;">尚未註冊?</span>
            <span style="color: whitesmoke;margin-top: 10px;" onclick="glitter.changePage('page/Page_Register_Info.html','Page_Register_Info',true,gBundle)">註冊</span>
            <span style="color: whitesmoke;margin-right: 0;float: right;" onclick="glitter.changePage('page/Page_Policy.html','Page_Policy',true,'{}')">隱私權政策</span>
        </div>
    </div>

</div>
</body>
</html>
<script>
    function signIn() {
        var admin=$('#admin').val()
        var password=$('#password').val()
        // glitter.setHome('page/Page_Home.html','Page_Home.html','{}')
        if(admin===undefined || admin===''||password===''||password===undefined){
            glitter.openDiaLog('dialog/Dia_Info.html', 'info', false, true, '請輸入帳號和密碼!!')
        }else{
            login($('#admin').val(),$('#password').val())
        }
    }

    ///------------------下方為FB登入------------------------///

    function statusChangeCallback(response) {  // Called with the results from FB.getLoginStatus().
        console.log('statusChangeCallback');
        console.log(response);                   // The current login status of the person.
        if (response.status === 'connected') {   // Logged into your webpage and Facebook.
            testAPI();
        }
    }


    function checkLoginState() {               // Called when a person is finished with the Login Button.
        FB.getLoginStatus(function(response) {   // See the onlogin handler
            statusChangeCallback(response);
        });
    }


    window.fbAsyncInit = function() {
        FB.init({
            appId      : '903631420436863',
            cookie     : true,                     // Enable cookies to allow the server to access the session.
            xfbml      : true,                     // Parse social plugins on this webpage.
            version    : 'v10.0'           // Use this Graph API version for this call.
        });


        FB.getLoginStatus(function(response) {   // Called after the JS SDK has been initialized.
            statusChangeCallback(response);        // Returns the login status.
        });
    };

    function testAPI() {                      // Testing Graph API after login.  See statusChangeCallback() for when this call is made.
        console.log('Welcome!  Fetching your information.... ');
        FB.api('/me', function(response) {
            JSON.stringify(response)
            console.log('Successful login for: ' + response.name);
        });
    }
</script>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js"></script>